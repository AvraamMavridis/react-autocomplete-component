"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();Object.defineProperty(exports,"__esModule",{value:!0});var _react=require("react"),AutoComplete=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.state={options:[],selectedIndex:-1,isOpen:!1,value:""},e.initKeyEvents(),e}return _inherits(t,e),_createClass(t,[{key:"initKeyEvents",value:function(){var e=this;document.addEventListener("keydown",function(t){40===t.which&&e.state.selectedIndex+1<e.state.options.length?e.setState({selectedIndex:e.state.selectedIndex+1}):38===t.which&&e.state.selectedIndex-1>=-1?e.setState({selectedIndex:e.state.selectedIndex-1}):13===t.which&&e.state.isOpen&&(e.setState({value:e.state.options[e.state.selectedIndex],options:[],isOpen:!1}),e.props.onSelect(e.state.value))})}},{key:"onType",value:function(e){var t=this.props.options.filter(function(t){return t.indexOf(e.target.value)>-1});this.setState({options:e.target.value?t:[],value:e.target.value,isOpen:Boolean(t.length&&e.target.value),selectedIndex:-1})}},{key:"onOptionClick",value:function(e){this.setState({value:e.target.textContent,options:[],isOpen:!1,selectedIndex:-1}),this.props.onSelect(this.state.value)}},{key:"componentWillUpdate",value:function(e,t){this.isClosed=this.isClosed||"true",t.isOpen&&"true"===this.isClosed?(e.onOpen(),this.isClosed="false"):t.isOpen||"false"!==this.isClosed||(e.onClose(),this.isClosed="true")}},{key:"render",value:function(){var e=this,t=_extends({},this.props.inputStyle),n=_extends({},this.props.optionStyle),s=_extends({},this.props.selectedStyle);return _react.React.createElement("div",null,_react.React.createElement("input",{ref:"inputElement",style:t,onChange:this.onType.bind(this),type:"text",value:this.state.value}),_react.React.createElement("ul",{tabindex:"0"},this.state.options.map(function(t,o){return _react.React.createElement("li",{style:e.state.selectedIndex===o?s:n,onClick:e.onOptionClick.bind(e),tabindex:o,className:e.state.selectedIndex===o?"selected":""}," ",t," ")})))}}]),t}(_react.React.Component);AutoComplete.defaultProps={inputStyle:{width:"100px"},optionStyle:{width:"106px"},selectedStyle:{width:"106px",backgroundColor:"LightSkyBlue"},onOpen:function(){return null},onClose:function(){return null},onSelect:function(){return null}},exports["default"]=AutoComplete;
